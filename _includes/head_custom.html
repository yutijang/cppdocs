<!-- <script src="/cppdocs/assets/js/redirect.js"></script> -->

<script>
document.addEventListener("DOMContentLoaded", function() {
    const hash = window.location.hash.substring(1);  // Lấy phần sau dấu #

    if (hash) {
        const searchInput = document.getElementById("search-input");

        if (searchInput) {
            // Đặt từ khóa vào ô tìm kiếm
            searchInput.value = hash;

            // Dispatch sự kiện input
            const inputEvent = new Event('input', { bubbles: true });
            searchInput.dispatchEvent(inputEvent);

            // Kiểm tra và khởi tạo tìm kiếm
            if (typeof jtd !== "undefined" && typeof jtd.initSearch === "function") {
                jtd.initSearch();

                // Sử dụng setTimeout để đợi cho đến khi dữ liệu tìm kiếm đã được tải
                const waitForSearchData = setInterval(() => {
                    if (typeof jtd.searchIndex !== "undefined" && typeof jtd.searchResults !== "undefined") {
                        // Khi dữ liệu tìm kiếm đã sẵn sàng, dừng interval
                        clearInterval(waitForSearchData);

                        // Gọi hàm searchLoaded để xử lý dữ liệu tìm kiếm
                        if (typeof jtd.searchLoaded === "function") {
                            jtd.searchLoaded(jtd.searchIndex, jtd.searchResults);
                        }

                        // Kích hoạt cửa sổ tìm kiếm bằng cách thêm lớp 'search-active'
                        document.documentElement.classList.add('search-active');

                        // Dispatch lại sự kiện input để hiển thị kết quả tìm kiếm
                        searchInput.dispatchEvent(inputEvent);
                    }
                }, 100);  // Kiểm tra mỗi 100ms
            } else {
                console.warn("Hàm initSearch không tìm thấy hoặc không được định nghĩa.");
            }
        }
    }
});
</script>
